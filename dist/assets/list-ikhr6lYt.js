import{aK as U,aL as w,c as L,r as c,aM as A,aN as G,aO as Q,j as s,aP as q,C as B,aQ as H,T as V,S as O,aR as W,aS as Y,p as v,aT as K,aU as M,aV as X,aW as Z,aX as z,aY as J,aZ as $,a_ as D,H as ee}from"./index-fhA8hu8c.js";import{o as S}from"./orderBy-NMxkOvlU.js";import{u as se}from"./use-debounce-daUbiwK6.js";import"./_baseEach-gYolQBDu.js";const R={gender:[],colors:[],rating:"",category:"all",priceRange:[0,200]};function te(){const e=U(),p=w(),r=L(),[a,h]=c.useState("featured"),[f,x]=c.useState(""),l=se(f),[o,i]=c.useState(R),{products:t,productsLoading:d,productsEmpty:u}=A(),{searchResults:j,searchLoading:F}=G(l),P=c.useCallback((n,k)=>{i(E=>({...E,[n]:k}))},[]),C=c.useCallback(()=>{i(R)},[]),m=re({inputData:t,filters:o,sortBy:a}),g=!Q(R,o),y=!m.length&&g,T=c.useCallback(n=>{h(n)},[]),I=c.useCallback(n=>{x(n)},[]),_=s.jsxs(O,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},children:[s.jsx(Y,{query:l,results:j,onSearch:I,loading:F,hrefItem:n=>v.product.details(n)}),s.jsxs(O,{direction:"row",spacing:1,flexShrink:0,children:[s.jsx(K,{open:r.value,onOpen:r.onTrue,onClose:r.onFalse,filters:o,onFilters:P,canReset:g,onResetFilters:C,colorOptions:M,ratingOptions:X,genderOptions:Z,categoryOptions:["all",...z]}),s.jsx(J,{sort:a,onSort:T,sortOptions:$})]})]}),N=s.jsx(q,{filters:o,onFilters:P,canReset:g,onResetFilters:C,results:m.length}),b=s.jsx(D,{filled:!0,title:"No Data",sx:{py:10}});return s.jsxs(B,{maxWidth:e.themeStretch?!1:"lg",sx:{mb:15},children:[s.jsx(H,{totalItems:p.totalItems}),s.jsx(V,{variant:"h4",sx:{my:{xs:3,md:5}},children:"Shop"}),s.jsxs(O,{spacing:2.5,sx:{mb:{xs:3,md:5}},children:[_,g&&N]}),(y||u)&&b,s.jsx(W,{products:m,loading:d})]})}function re({inputData:e,filters:p,sortBy:r}){const{gender:a,category:h,colors:f,priceRange:x,rating:l}=p,o=x[0],i=x[1];return r==="featured"&&(e=S(e,["totalSold"],["desc"])),r==="newest"&&(e=S(e,["createdAt"],["desc"])),r==="priceDesc"&&(e=S(e,["price"],["desc"])),r==="priceAsc"&&(e=S(e,["price"],["asc"])),a.length&&(e=e.filter(t=>a.includes(t.gender))),h!=="all"&&(e=e.filter(t=>t.category===h)),f.length&&(e=e.filter(t=>t.colors.some(d=>f.includes(d)))),(o!==0||i!==200)&&(e=e.filter(t=>t.price>=o&&t.price<=i)),l&&(e=e.filter(t=>{const d=u=>u==="up4Star"?4:u==="up3Star"?3:u==="up2Star"?2:1;return t.totalRatings>d(l)})),e}function le(){return s.jsxs(s.Fragment,{children:[s.jsx(ee,{children:s.jsx("title",{children:" Product: Shop"})}),s.jsx(te,{})]})}export{le as default};
