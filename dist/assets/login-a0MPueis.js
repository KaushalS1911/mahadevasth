import{u as B,a as k,r as c,b as D,d as g,e as o,f as H,j as e,B as a,n as I,C as T,Q as V,q as E,s as G,t as N,F as z,G as t,g as p,v as b,w as y,x as i,y as n,T as h,z as O,D as W,S as $,L as A,R as J,p as K,o as Q,H as U}from"./index-fhA8hu8c.js";import"./registration-page-view-aPfFAi0P.js";function X(){const{login:u}=B();k();const[Y,C]=c.useState(""),S=D(),[x,w]=c.useState(""),[v,f]=c.useState("");S.get("returnTo");const[q,d]=c.useState(!1),_=g().shape({phone_number:o().required("Phone number is required"),password:o().required("Password is required"),category:o().required("Vendor category is required"),sub:o().required("Sub category is required")}),P=g().shape({phone_number:o().required("Phone number is required"),password:o().required("Password is required"),category:o().required("Vendor category is required")}),L={phone_number:"",password:"",category:"",sub:""},m=H({resolver:Q(x==="society"?_:P),defaultValues:L}),{reset:F,control:j,register:ee,handleSubmit:R,formState:{errors:l}}=m,M=R(async s=>{d(!0);try{await(u==null?void 0:u({...s,category:x==="society"?v:s.category})),localStorage.setItem("login_type","other-login"),d(!1)}catch(r){console.error(r),F(),C(typeof r=="string"?r:r.message),d(!1)}});return e.jsx(e.Fragment,{children:q?e.jsx(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"white"},children:e.jsx(I,{sx:{margin:"auto"}})}):e.jsxs(T,{maxWidth:"sm",children:[e.jsx(V,{}),e.jsx(a,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:e.jsx(E,{sx:{mt:5},children:e.jsxs(G,{sx:{pb:"70px !important",pt:"50px !important",px:"30px"},children:[e.jsx(a,{display:"flex",justifyContent:"center",mb:3,sx:{height:"130px",mb:"60px"},children:e.jsx("img",{src:N,alt:"BootstrapBrain Logo"})}),e.jsx(z,{onSubmit:M,methods:m,children:e.jsxs(t,{container:!0,spacing:2,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(p,{name:"phone_number",label:"Phone Number"})}),e.jsx(t,{item:!0,xs:12,sx:{my:"10px"},children:e.jsx(p,{name:"password",label:"Password",type:"password"})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(b,{name:"category",control:j,render:({field:s})=>e.jsxs(a,{children:[e.jsxs(y,{...s,row:!0,onChange:r=>{s.onChange(r),w(r.target.value)},children:[e.jsx(i,{value:"miller",control:e.jsx(n,{}),label:"Miller"}),e.jsx(i,{value:"distributor",control:e.jsx(n,{}),label:"Distributor"}),e.jsx(i,{value:"miller_distributor",control:e.jsx(n,{}),label:"Miller + Distributor"}),e.jsx(i,{value:"society",control:e.jsx(n,{}),label:"Society/Co-operative"})]}),l.category&&e.jsx(h,{color:"error",children:l.category.message})]})})}),x=="society"&&e.jsx(t,{item:!0,xs:12,children:e.jsx(b,{name:"sub",control:j,render:({field:s})=>e.jsxs(a,{children:[e.jsxs(y,{...s,row:!0,onChange:r=>{s.onChange(r),f(r.target.value)},children:[e.jsx(i,{value:"own_distribution_own_mill",control:e.jsx(n,{}),label:"Own both (Mill & Distribution)"}),e.jsx(i,{value:"own_distribution_rent_mill",control:e.jsx(n,{}),label:"Own Distribution (Rent Mill)"}),e.jsx(i,{value:"cooperative_rent_mill",control:e.jsx(n,{}),label:"Co-operative (Rent Mill)"})]}),l.sub&&e.jsx(h,{color:"error",children:l.sub.message})]})})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(O,{name:"remember_me",label:"Keep me logged in"})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(W,{variant:"contained",size:"large",color:"primary",fullWidth:!0,type:"submit",children:"Sign In"})}),e.jsx(t,{item:!0,xs:12,children:e.jsxs($,{direction:"row",sx:{mt:2,justifyContent:"center"},spacing:1,children:[e.jsx(h,{variant:"subtitle2",children:"Become NCCF CSP?"}),e.jsx(A,{component:J,href:K.auth.jwt.register,variant:"subtitle2",children:"Create an account"})]})})]})})]})})})]})})}function te(){return e.jsxs(e.Fragment,{children:[e.jsx(U,{children:e.jsx("title",{children:" NCCF CSP Portal: Login"})}),e.jsx(X,{})]})}export{te as default};
