import{a as J,r as m,K as h,d as g,e as i,m as u,f as Q,M as N,p as X,j as e,B as b,n as ee,T as x,F as re,G as t,g as o,N as l,v as A,w as ie,x as w,y as P,D as se,o as te}from"./index-fhA8hu8c.js";const ae=({vendor_category:a})=>{const M=J(),[p,O]=m.useState([]),[B,T]=m.useState([]),[R,I]=m.useState([]),[D,F]=m.useState(""),[L,q]=m.useState(!1),E=(r,s)=>{F(s),c.setValue("state",s),c.setValue("district",""),c.setValue("branch","")},G=["Partnership","Proprietary ","LLP","Public Limited","Other"],$=["Retail outlet","Mobile van"];m.useEffect(()=>{W()},[]);const d=p==null?void 0:p.find(r=>(r==null?void 0:r.state_name)===D);m.useEffect(()=>{d&&d.state_id&&(Z(d.state_id),z(d.state_id))},[d]);function W(){h.get("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/state").then(r=>{var s;O((s=r==null?void 0:r.data)==null?void 0:s.data)})}function Z(r){h.get(`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/state/${r}/branch`).then(s=>{var n;T((n=s==null?void 0:s.data)==null?void 0:n.data)})}function z(r){h.get(`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/state/${r}/district`).then(s=>{var n;I((n=s==null?void 0:s.data)==null?void 0:n.data)})}const _=/^([0][1-9]|[1-2][0-9]|3[0-5])[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,f=/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,j=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,U=["Dry","Wet","Both"],Y=g().shape({name:i().required("Name is required"),milling_type:i().required("Milling type is required"),type_of_firm:i().required("Type of firm is required"),confirm_password:i().min(6,"Minimum 6 character should be required").oneOf([u("password"),null],"Passwords must match").required("Confirm password is required"),password:i().min(6,"Minimum 6 character should be required").oneOf([u("password"),null],"Passwords must match").required("Confirm password is required"),contact_person:i().required("Contact Person is required"),gst_number:i().matches(_,"Invalid GST number format").required("GST number is required"),email:i().matches(j,"Invalide email format").required("Email is required"),address:i().required("Address is required"),state:i().required("State is required"),district:i().required("District is required"),branch:i().required("Branch is required"),pan_number:i().matches(f,"Invalid PAN number format").required("PAN number is required"),procurement_area:i().required("Procurement area is required"),pincode:i().max(6,"Invalide pincode number").required("Pincode is required"),phone_number:i().max(10,"Enter valid contact number").required("Phone Number is required")}),k=g().shape({name:i().required("Name is required"),capacity:i().required("Capacity is required"),mode_of_sale:i().required("Mode of sale is required"),area_of_opration:i().required("Area of opration is required"),type_of_firm:i().required("Type of firm is required"),confirm_password:i().min(6,"Minimum 6 character should be required").oneOf([u("password"),null],"Passwords must match").required("Confirm password is required"),password:i().min(6,"Minimum 6 character should be required").oneOf([u("password"),null],"Passwords must match").required("Confirm password is required"),contact_person:i().required("Contact Person is required"),gst_number:i().required("GST number is required").matches(_,"Invalid GST number format"),email:i().matches(j,"Invalide email format").required("Email is required"),address:i().required("Address is required"),state:i().required("State is required"),district:i().required("District is required"),branch:i().required("Branch is required"),pan_number:i().required("PAN number is required").matches(f,"Invalid PAN number format"),procurement_area:i().required("Procurement area is required"),pincode:i().max(6,"Invalide pincode number").required("Pincode is required"),phone_number:i().max(10,"Enter valid contact number").required("Phone Number is required")}),v=g().shape({name:i().required("Name is required"),confirm_password:i().min(6,"Minimum 6 character should be required").oneOf([u("password"),null],"Passwords must match").required("Confirm password is required"),password:i().min(6,"Minimum 6 character should be required").oneOf([u("password"),null],"Passwords must match").required("Confirm password is required"),contact_person:i().required("Contact Person is required"),gst_number:i().matches(_,"Invalid GST number format").required("GST number is required"),mil_dis_sub_roles:i().required("Sub category is required"),email:i().matches(j,"Invalide email format").required("Email is required"),address:i().required("Address is required"),state:i().required("State is required"),district:i().required("District is required"),branch:i().required("Branch is required"),pan_number:i().matches(f,"Invalid PAN number format").required("PAN number is required"),procurement_area:i().required("Procurement area is required"),pincode:i().max(6,"Invalide pincode number").required("Pincode is required"),phone_number:i().max(10,"Enter valid contact number").required("Phone Number is required")}),H={name:"",category:"",milling_type:"",mil_dis_sub_roles:"",type_of_firm:"",contact_person:"",phone_number:"",email:"",password:"",confirm_password:"",address:"",state:"",district:"",procurement_area:"",branch:"",pincode:"",pan_number:"",gst_number:"",mode:"",area_of_opration:"",mode_of_sale:"",capacity:""},c=Q({resolver:te(a==="distributor"||a==="modern_trade"?k:a==="society_cooperative"?v:Y),defaultValues:H}),{reset:oe,control:S,register:de,handleSubmit:V,formState:{errors:y}}=c,K=V(async r=>{q(!0);const s={name:r.name||"",category:a||"",milling_type:r.milling_type||"",mil_dis_sub_roles:r.mil_dis_sub_roles||"",type_of_firm:r.type_of_firm||"",contact_person:r.contact_person||"",phone_number:r.phone_number||"",email:r.email||"",password:r.password||"",confirm_password:r.confirm_password||"",address:r.address||"",state:r.state||"",district:r.district||"",procurement_area:r.procurement_area||"",branch:r.branch||"",pincode:r.pincode||"",pan_number:r.pan_number||"",gst_number:r.gst_number||"",mode:""};h.post("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp",s).then(n=>{var C;((C=n==null?void 0:n.data)==null?void 0:C.status)=="201"&&(N("Register Successfully"),q(!1),M.push(X.auth.jwt.login))}).catch(n=>{console.log(n),q(!1),N("Something want wrong",{variant:"error"})})});return e.jsx(e.Fragment,{children:L?e.jsx(b,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",backgroundColor:"white"},children:e.jsx(ee,{sx:{margin:"auto"}})}):e.jsxs(b,{p:5,className:"registerForm",sx:{backgroundColor:"white",borderRadius:"10px"},children:[e.jsx(x,{variant:"h5",gutterBottom:!0,className:"heading",children:"Basic Information"}),e.jsxs(re,{onSubmit:K,methods:c,children:[e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{name:"name",label:a==="distributor"||a==="modern_trade"?"Distributor Name":a==="miller"||a==="miller_distributor"?"Milling Unit Name":"Society Name"})}),(a==="miller"||a==="miller_distributor")&&e.jsx(t,{item:!0,xs:12,sm:6,md:3,children:e.jsx(l,{name:"milling_type",type:"milling_type",label:"Milling Type",placeholder:"Choose Milling Type",fullWidth:!0,options:U.map(r=>r),getOptionLabel:r=>r})}),a!=="society_cooperative"&&e.jsx(t,{item:!0,xs:12,sm:3,children:e.jsx(l,{name:"type_of_firm",label:"Type of Firm",placeholder:"Choose Your firm",fullWidth:!0,options:G.map(r=>r),getOptionLabel:r=>r})}),e.jsx(t,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{name:"contact_person",label:"Contact Person"})}),e.jsx(t,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{name:"phone_number",label:"Phone Number",type:"number"})}),e.jsx(t,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{name:"email",label:"Email"})}),(a==="distributor"||a==="modern_trade")&&e.jsxs(e.Fragment,{children:[e.jsx(t,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{name:"area_of_opration",label:"Area of Opration"})}),e.jsx(t,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{name:"capacity",label:"Capacity /day (MT)"})}),e.jsx(t,{item:!0,xs:12,sm:3,children:e.jsx(l,{name:"mode_of_sale",label:"Mode of Sale",placeholder:"Choose mode of sale",fullWidth:!0,options:$.map(r=>r),getOptionLabel:r=>r})})]}),e.jsx(t,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{name:"pan_number",label:"PAN Number"})}),e.jsx(t,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{name:"gst_number",label:"GST Number"})}),a==="society_cooperative"&&e.jsx(t,{item:!0,xs:12,children:e.jsx(A,{name:"mil_dis_sub_roles",control:S,render:({field:r})=>e.jsxs(b,{children:[e.jsxs(ie,{row:!0,"aria-label":"vendor",...r,children:[e.jsx(w,{value:"own_distribution_own_mill",control:e.jsx(P,{}),label:"Own both (Mill & Distribution)"}),e.jsx(w,{value:"own_distribution_rent_mill",control:e.jsx(P,{}),label:"Own Distribution (Rent Mill)"}),e.jsx(w,{value:"cooperative_rent_mill",control:e.jsx(P,{}),label:"Co-operative (Rent Mill)"})]}),y.mil_dis_sub_roles&&e.jsx(x,{color:"error",children:y.mil_dis_sub_roles.message})]})})})]}),e.jsx(x,{variant:"h5",gutterBottom:!0,className:"heading",mt:2,children:` ${a==="distributor"||a==="modern_trade"||a==="miller_distributor"||a==="miller"?"Address of Proposed Milling Unit Premises":"Address Information"}`}),e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(o,{name:"address",label:"Address"})}),e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsx(A,{name:"state",control:S,render:({field:r})=>e.jsx(l,{...r,label:"State",placeholder:"Choose Your State",fullWidth:!0,options:p.map(s=>s==null?void 0:s.state_name),getOptionLabel:s=>s,onChange:(s,n)=>{r.onChange(n),E(s,n)}})})}),e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsx(l,{name:"district",label:"District",placeholder:"Choose Your District",fullWidth:!0,options:R.map(r=>r==null?void 0:r.district),getOptionLabel:r=>r,disabled:!d})}),e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsx(o,{name:"pincode",label:"Pin Code"})}),e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsx(l,{name:"branch",label:"Branch",placeholder:"Choose Your Branch",fullWidth:!0,options:B.map(r=>r==null?void 0:r.branch_name),getOptionLabel:r=>r,disabled:!d})}),e.jsx(t,{item:!0,xs:12,sm:6,md:4,children:e.jsx(o,{name:"procurement_area",label:"Procurement area"})})]}),e.jsx(x,{variant:"h5",gutterBottom:!0,className:"heading",mt:2,children:"Password"}),e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,sm:6,md:4,children:e.jsx(o,{type:"password",name:"password",label:"Password"})}),e.jsx(t,{item:!0,xs:12,sm:6,md:4,children:e.jsx(o,{type:"password",name:"confirm_password",label:"Confirm Password"})})]}),e.jsx(b,{display:"flex",justifyContent:"flex-end",mt:3,children:e.jsx(se,{type:"submit",variant:"contained",color:"primary",children:"SUBMIT"})})]})]})})},ue=ae;export{ue as R};
