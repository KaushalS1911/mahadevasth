import{r as i,aK as O,u as q,K as x,f as w,o as F,j as e,H as _,C as v,T as u,B as a,Q as z,F as B,am as n,q as E,S as c,N as H,g as Q,k as R,d as T,e as h,cQ as p}from"./index-fhA8hu8c.js";const k=T().shape({commodity:h().required("Commodity is required"),quantity:h().required("Quantity is required")});function N(){const[f,j]=i.useState([]),y=O(),{vendor:d}=q(),g=()=>p.success("Order created"),m=t=>p.error(t);i.useEffect(()=>{C()},[]);function C(){x.get("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/commodity").then(t=>{var r;j((r=t.data)==null?void 0:r.data)})}const S=i.useMemo(()=>({csp_code:d.csp_code,commodity:"",quantity:""}),[]),o=w({defaultValues:S,resolver:F(k)}),{handleSubmit:b}=o,l=b(async t=>{const r={...t,csp_code:d.csp_code,mode:"test",status:"0"};try{const s=await x.post("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/create_order",r);s.data.status=="201"?g():s.data.status=="400"&&m(s.data.message)}catch(s){m("Something went wrong"),console.error("Order creation error:",s)}});return e.jsxs(e.Fragment,{children:[e.jsx(_,{children:e.jsx("title",{children:" Dashboard | Order"})}),e.jsxs(v,{maxWidth:y.themeStretch?!1:"xl",children:[e.jsx(u,{variant:"h4",children:"Order"}),e.jsxs(a,{sx:{mt:5,width:1,height:320,borderRadius:2},children:[e.jsx(z,{}),e.jsx(B,{methods:o,onSubmit:l,children:e.jsxs(n,{container:!0,sx:{mt:"30px"},children:[e.jsx(n,{item:!0,md:4,children:e.jsx(a,{sx:{ml:{md:"60px",xs:"0"},mt:"60px"},children:e.jsxs(a,{sx:{mb:"30px",fontWeight:"600",fontSize:"18px"},children:["Create Order",e.jsx(u,{sx:{fontSize:"13px",color:"#637381"},children:"Create Order Input fields"})]})})}),e.jsxs(n,{item:!0,md:8,children:[e.jsx(E,{children:e.jsx(c,{spacing:3,sx:{p:3},children:e.jsx(c,{spacing:1.5,children:e.jsxs(a,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)"},children:[e.jsx(H,{name:"commodity",type:"commodity",label:"Commodity",placeholder:"Choose Commodity",fullWidth:!0,options:f.map(t=>t==null?void 0:t.commodity_name),getOptionLabel:t=>t}),e.jsx(Q,{name:"quantity",label:"Quantity"})]})})})}),e.jsx(c,{alignItems:"flex-end",sx:{mt:3},children:e.jsx(R,{type:"submit",className:"button",loading:o.formState.isSubmitting,onClick:l,children:"Order"})})]})]})})]})]})]})}export{N as default};
